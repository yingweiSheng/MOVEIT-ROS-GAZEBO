# 报文格式

此文档描述了报文格式，每个报文的长度都是固定的。

## 1. ReverseInterface
每个数据的大小为4个字节。  

### 1.1 发送给控制脚本的报文
报文长度：8 个int数据。

| 名称 | 描述 |
| --- | --- |
| timeout | 超时（毫秒） |
| 数据1 | 关节角度、速度等数据<sup>*1</sup>（放大 1000000 倍传输） |
| 数据2 | 关节角度、速度等数据（放大 1000000 倍传输） |
| 数据3 | 关节角度、速度等数据（放大 1000000 倍传输） |
| 数据4 | 关节角度、速度等数据（放大 1000000 倍传输） |
| 数据5 | 关节角度、速度等数据（放大 1000000 倍传输） |
| 数据6 | 关节角度、速度等数据（放大 1000000 倍传输） |
| 模式 | <sup>*2</sup>控制模式（决定了是movej还是servoj等运动方式） |

> *1：因为脚本在读取的时候，读取的是整数，而关节角等数据都是浮点数，因此需要放大 1000000 倍传输，脚本中读取的时候，会除以 1000000 。
> *2：对应代码`ControlMode.hpp`中的`ControlMode`枚举。

对于`writeTrajectoryControlAction()`接口报文格式则如下：
| 名称 | 描述 |
| --- | --- |
| timeout | 超时（毫秒） |
| 动作 | 开始、取消、空操作 |
| 点位的数量 | 点位的数量 |
| 保留 | 保留 |
| 保留 | 保留 |
| 保留 | 保留 |
| 保留 | 保留 |
| 模式 | 值为`ControlMode::MODE_TRAJECTORY` |

## 2. ScriptCommandInterface

### 2.1 发送给控制脚本的报文
报文长度：26 个int数据。

| 名称 | 描述 |
| --- | --- |
| command | <sup>*1</sup>指令 |
| 指令数据1~25 | <sup>*2</sup>指令需要的数据 |

> *1：对应代码`ScriptCommandInterface.hpp`中的`ScriptCommandInterface::Cmd`枚举。
> *2：依据指令的不同，有用的数据个数也不同，没用到的数据可以设置为0。

## 3. TrajectoryInterface

### 3.1 发送给控制脚本的报文
报文长度：21 个int数据。

| 名称 | 描述 |
| --- | --- |
| x或关节1 | 目标点的x坐标值，或关节1的角度值<sup>*1</sup>（放大 1000000 倍传输） |
| y或关节2 | 目标点的y坐标值，或关节2的角度值（放大 1000000 倍传输） |
| z或关节3 | 目标点的z坐标值，或关节3的角度值（放大 1000000 倍传输） |
| rx或关节4 | 目标点的rx坐标值，或关节4的角度值（放大 1000000 倍传输） |
| ry或关节5 | 目标点的ry坐标值，或关节5的角度值（放大 1000000 倍传输） |
| rz或关节6 | 目标点的rz坐标值，或关节6的角度值（放大 1000000 倍传输） |
| 7~18 | 保留 |
| 时间 | 到达目标点的时间 |
| 交融半径 | （放大 1000000 倍传输） |
| 轨迹类型 | <sup>*1</sup>轨迹类型 |

> *1：因为脚本在读取的时候，读取的是整数，而关节角等数据都是浮点数，因此需要放大 1000000 倍传输，脚本中读取的时候，会除以 1000000 。
> *2：对应代码`TrajectoryInterface.hpp`中的`TrajectoryMotionType`枚举。

### 3.2 控制脚本返回的报文
报文长度：1 个int数据。

| 名称 | 描述 |
| --- | --- |
| 结果 | <sup>*1</sup>运行结果 |
> *2：对应代码`DataType.hpp`中的`TrajectoryMotionResult`枚举。

